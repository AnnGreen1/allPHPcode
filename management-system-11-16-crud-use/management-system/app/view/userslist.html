<!--
 * @Description: 用户列表模块view
 * @Version: 1.0
 * @Author: Humbert Cheung
 * @Date: 2021-11-16 09:29:53
 * @LastEditors: [Humbert Cheung]
 * @LastEditTime: 2021-11-16 09:52:34
 * @FilePath: /management-system/app/view/userslist.html
 * Copyright (C) 2021 syzhang. All rights reserved.
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>首页</title>
  <link rel="stylesheet" href="./third_party/layui/css/layui.css">
  <style>
    {literal}
    #container {
      padding: 20px;
    }
    {/literal}
  </style>
</head>

<body class="layui-layout-body">
  <div class="layui-layout layui-layout-admin">
    {php}
    require_once './app/view/common/nav.php';
    {/php}
    <div class="layui-body">
      <div id="container">
        <a href="./index.php?controller=Users&method=add" class="layui-btn">
          <i class="layui-icon layui-icon-add-circle"></i>
          添加用户
        </a>
        <table class="layui-table">
          <thead>
            <tr>
              <th>编号</th>
              <th>姓名</th>
              <th>密码</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody>
            { foreach from=$data item=user key=key name=name }
            <tr>
              <td>{$user.id}</td>
      
              <td>{$user.username}</td>
              <td>{$user.password}</td>
              <td>
                <a class='layui-btn layui-btn-sm' href="./index.php?controller=Users&method=edit&id={$user.id}">编辑</a>
                <button class="layui-btn layui-btn-sm layui-btn-danger" onclick="deleteUser({$user.id}, '{$user.name}')">删除</button>
              </td>
            </tr>
            { /foreach }
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <script src="./third_party/layui/layui.js"></script>
  <script>
    {literal}
    function deleteUser(id, name) {
      // 获取弹出框对象
      var layer = layui.layer;
      layer.confirm('确认删除' + name + "？", {
        btn: ["确定", "取消"] // 设置按钮
      }, function (index, ) {
        // 第一个按钮的回调函数
        location.href = "./index.php?controller=Users&method=delete&id=" + id
      }, function (index) {
        // 第二个按钮的回调函数
      })
    }
    {/literal}
  </script>
</body>

</html>
















